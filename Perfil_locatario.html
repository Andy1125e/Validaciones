<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Perfil Locatario</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f8f9fa;
    }
    .perfil {
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      text-align: center;
    }
    .perfil img {
      width: 120px;
      height: 120px;
      border-radius: 8px;
      object-fit: cover;
      margin-bottom: 10px;
      background: #e0e0e0;
    }
    .perfil p {
      margin: 4px 0;
    }
    .tabla {
      background: white;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      text-align: left;
    }
    th, td {
      padding: 10px;
      border-bottom: 1px solid #ccc;
    }
    td button {
      padding: 5px 12px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .acordeon {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 10px;
      overflow: hidden;
    }
    .acordeon-titulo {
      background: #004276;
      color: white;
      padding: 10px 15px;
      cursor: pointer;
      user-select: none;
    }
    .acordeon-contenido {
      display: none;
      padding: 15px;
      text-align: center;
    }
    .acordeon-contenido img {
      width: 100px;
      height: 100px;
      border-radius: 6px;
      background: #ccc;
      margin-bottom: 10px;
    }
    .acordeon-contenido p {
      margin: 5px 0;
    }
    .acordeon-contenido button {
      margin: 5px;
      padding: 5px 12px;
      background-color: #dc3545;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    .reenviar-btn {
      background-color: #17a2b8;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-contenido {
      background: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      max-width: 320px;
      width: 100%;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    .modal-contenido h3 {
      margin-bottom: 15px;
    }
    .modal-contenido button {
      display: block;
      width: 100%;
      margin: 8px 0;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    .btn-whatsapp { background-color: #25D366; color: white; }
    .btn-presencial { background-color: #007bff; color: white; }
    .btn-oficina { background-color: #ffc107; color: black; }
    .btn-cancelar { background-color: #dc3545; color: white; }

    #codigo-oficina {
      margin-top: 10px;
      display: none;
    }
    #codigo-texto {
      font-weight: bold;
      margin-bottom: 8px;
    }
    .btn-copiar {
      background-color: #28a745;
      color: white;
      padding: 8px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }
    #whatsapp-container {
      margin-top: 10px;
      display: none;
    }
    #numero-whatsapp {
      width: 100%;
      padding: 8px;
      margin-bottom: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 14px;
      box-sizing: border-box;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

  <div class="perfil">
    <img src="HI 1.png" alt="Foto Usuario">
    <p><strong>Nombre:</strong> Juan Pérez</p>
    <p><strong>Local:</strong> Mi Tienda </p>
    <p><strong>No:</strong> 10 </p>
    <p><strong>Área:</strong> Restaurante </p>
    <p><strong>Cel:</strong> 5512345678</p>
  </div>

  <div class="tabla">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Status</th>
          <th>Enviar</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>Disponible</td>
          <td><button class="btn-enviar">Enviar</button></td>
        </tr>
        <tr>
          <td>2</td>
          <td>Disponible</td>
          <td><button class="btn-enviar">Enviar</button></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="acordeon">
    <div class="acordeon-titulo">1. Nombre del Empleado ▼</div>
    <div class="acordeon-contenido">
      <img src="HI 1.png" alt="Foto">
      <p><strong>Nombre:</strong> Andrea López</p>
      <p><strong>Cel:</strong> 5523456789</p>
      <p><strong>VTR:</strong> Activo</p>
      <button>Eliminar</button>
      <button class="reenviar-btn">Reenviar</button>
    </div>
  </div>

  <div class="acordeon">
    <div class="acordeon-titulo">2. Nombre del Empleado ▼</div>
    <div class="acordeon-contenido">
      <img src="HI 1.png" alt="Foto">
      <p><strong>Nombre:</strong> Andrea López</p>
      <p><strong>Cel:</strong> 5523456789</p>
      <p><strong>Estatus:</strong> Activo</p>
      <button>Eliminar</button>
      <button class="reenviar-btn">Reenviar</button>
    </div>
  </div>

  <div id="modal" class="modal">
    <div class="modal-contenido">
      <h3>Selecciona método de envío</h3>
      <button class="btn-whatsapp">WhatsApp</button>
      <button class="btn-presencial">Presencial</button>
      <button class="btn-oficina">Oficina</button>

      <div id="whatsapp-container">
        <input id="numero-whatsapp" type="text" placeholder="Número de WhatsApp" />
        <button id="enviar-whatsapp" class="btn-whatsapp">Enviar por WhatsApp</button>
      </div>

      <div id="codigo-oficina">
        <p id="codigo-texto"></p>
        <button id="copiar-codigo" class="btn-copiar">Copiar código</button>
      </div>

      <button id="cerrar-modal" class="btn-cancelar">Cerrar</button>
    </div>
  </div>

<script>
$(document).ready(function(){
  let tokenGenerado = "";
  let linkGenerado = "";

  $(".acordeon-titulo").click(function(){
    const contenido = $(this).next(".acordeon-contenido");
    if(contenido.is(":visible")) {
      contenido.slideUp();
    } else {
      $(".acordeon-contenido").slideUp();
      contenido.slideDown();
    }
  });

  $(".btn-enviar").click(function(){
    tokenGenerado = Math.random().toString(36).substr(2, 9);
    linkGenerado = "Registro_empleado.html?token=" + tokenGenerado;

    $("#codigo-oficina").hide();
    $("#whatsapp-container").hide();
    $("#numero-whatsapp").val("");
    $("#modal").fadeIn();
  });

  $("#cerrar-modal").click(function(){
    $("#modal").fadeOut();
  });

  $(".btn-whatsapp").click(function(){
    $("#whatsapp-container").show();
    $("#codigo-oficina").hide();
  });

  $(".btn-oficina").click(function(){
    $("#codigo-texto").text("Código: " + tokenGenerado.toUpperCase());
    $("#codigo-oficina").show();
    $("#whatsapp-container").hide();
  });

  $("#enviar-whatsapp").click(function(){
    const numero = $("#numero-whatsapp").val().trim();
    const soloNumeros = /^\d+$/;
    if(!soloNumeros.test(numero) || numero.length < 10){
      alert("Por favor ingresa un número válido con al menos 10 dígitos y sin caracteres especiales.");
      return;
    }
    const mensaje = "Aquí está tu link: " + "https://andy1125e.github.io/Validaciones/Registro_empleado.html";
    const enlace = "https://api.whatsapp.com/send?phone=" + numero + "&text=" + encodeURIComponent(mensaje);
    window.open(enlace, "_blank");

    /*const mensaje = encodeURIComponent("Aquí está tu link: " + linkGenerado);
    window.open("https://wa.me/" + numero + "?text=" + mensaje, "_blank");
    $("#modal").fadeOut();*/
  });

  $(".btn-presencial").click(function(){
    window.location.href = linkGenerado;
    $("#modal").fadeOut();
  });

  $("#copiar-codigo").click(function(){
    navigator.clipboard.writeText(tokenGenerado.toUpperCase())
      .then(() => alert("Código copiado al portapapeles"))
      .catch(() => alert("No se pudo copiar el código"));
  });
});
</script>

</body>
</html>
